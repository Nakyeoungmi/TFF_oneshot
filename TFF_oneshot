`timescale 1ns / 1ps

module TFF_oneshot(
    input clk,
    input rst, 
    input T,
    output reg Q
);


    reg T_reg, T_trig;

    always @(posedge clk or negedge rst) begin
        if (!rst) begin
            Q <= 1'b0;
            T_reg <= 1'b0;
            T_trig <= 1'b0;
        end else begin
            T_reg <= T;
            T_trig <= T&~T_reg;
        end
    end
    
    always @(posedge clk) begin
        if (T_trig) begin
            Q <= ~Q;
        end
    end
endmodule
